# Автоматизация
Создание аналитического отчета (дашборд) для Яндекс.Дзен в Tableau.


## Часть 1. Составление технического задания
Для анализа пользовательствого взаимодействия с карточками статей, необходимо построить автоматизированный отчет (даш) на основании пайплайна.
Берем данные из таблицы, в которых хранятся сырые данные, трансформируем данные и укладываем их в агрегирующую таблицу.
### ТЗ:
- Бизнес-задача: анализ взаимодействия пользователей с карточками Яндекс.Дзен;
- Насколько часто предполагается пользоваться дашбордом: не реже, чем раз в неделю;
- Кто будет основным пользователем дашборда: менеджеры по анализу контента;
- Состав данных для дашборда:
  - История событий по темам карточек (два графика - абсолютные числа и процентное соотношение);
  - Разбивка событий по темам источников;
  - Таблица соответствия тем источников темам карточек;
- По каким параметрам данные должны группироваться:
  - Дата и время;
  - Тема карточки;
  - Тема источника;
  - Возрастная группа;
- Характер данных:
  - История событий по темам карточек — абсолютные величины с разбивкой по минутам;
  - Разбивка событий по темам источников — относительные величины (% событий);
  - Соответствия тем источников темам карточек - абсолютные величины;
- Важность: все графики имеют равную важность;
- Источники данных для дашборда: cырые данные о событиях взаимодействия пользователей с карточками (таблица log_raw);
- База данных, в которой будут храниться агрегированные данные: дополнительные агрегированные таблицы в БД zen;
- Частота обновления данных: один раз в сутки, в полночь по UTC;
- Какие графики должны отображаться и в каком порядке, какие элементы управления должны быть на дашборде (макет дашборда):

## Часть 2. Создание дашборда
![макет отчета](https://user-images.githubusercontent.com/62104692/165963460-c0b3796f-ade2-4d4a-a0b7-1ce468c80443.png)

Для создания дашборда выполним следующие шаги:
  1. Создадим коннект к БД:

```python
# импортируем библиотеки
import pandas as pd
from sqlalchemy import create_engine

db_config = {'user': 'praktikum_student', # имя пользователя
            'pwd': 'Sdf4$2;d-d30pp', # пароль
            'host': 'rc1b-wcoijxj3yxfsf3fs.mdb.yandexcloud.net',
            'port': 6432, # порт подключения
            'db': 'data-analyst-zen-project-db'} # название базы данных

connection_string = 'postgresql://{}:{}@{}:{}/{}'.format(db_config['user'],
                                                db_config['pwd'],
                                                db_config['host'],
                                                db_config['port'],
                                                db_config['db'])

engine = create_engine(connection_string)
```
  2. Выполним sql-запрос:
 ```python
 pd.io.sql.read_sql(query, con = engine)
 ```
  3. Напишем кол для выгрузки данных из таблицы в файл.
  4. В Tableau Public на основе файла сформируйте дашборд в соответствии с макетом и опубликуем дашборд на сайте Tableau Public.
